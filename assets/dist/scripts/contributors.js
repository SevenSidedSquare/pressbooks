jQuery((function(t){t(document).ready((function(){jQuery("#contributor-media-picture").hide(),jQuery("#wpbody-content > div.wrap.nosubsub > form").css("margin",0),jQuery("#btn-media").on("click",(function(t){t.preventDefault(),jQuery("#plupload-browse-button").click()})),jQuery("#plupload-browse-button").on("click",(function(t){var e=wp.media.controller.SiteIconCropper.extend({doCrop:function(t){var e=t.get("cropDetails");return e.dst_width=512,e.dst_height=512,wp.ajax.post("crop-image",{nonce:t.get("nonces").edit,id:t.get("id"),context:"site-icon",cropDetails:e})}}),r=wp.media({button:{text:"Done",close:!1},states:[new wp.media.controller.Library({title:"Select a picture",library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:512,suggestedHeight:512}),new e({imgSelectOptions:function(t,e){var r,i,o,n,u,c,a,s,p,l=!1,d=!1,g=t.get("width"),h=t.get("height"),y=512,b=512,m=y,w=b;return e.set("canSkipCrop",(u=d,c=y,a=b,s=g,p=h,!!(!0===(n=l)&&!0===u||!0===n&&a===p||!0===u&&c===s||c===s&&a===p||s<=c))),g/h>1?y=1*(b=h):b=(y=g)/1,o={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:g,imageHeight:h,minWidth:m>y?y:m,minHeight:w>b?b:w,x1:r=(g-y)/2,y1:i=(h-b)/2,x2:y+r,y2:b+i},o.aspectRatio=y+":"+b,o}})]});t.preventDefault(),r.open(),r.on("cropped",(function(t){jQuery("#contributor-picture").val(t.url),jQuery("#contributor-picture-thumbnail").attr("src",t.url).show()})),r.on("insert",(function(){var t=r.state().get("selection").first().toJSON();jQuery("#contributor-picture").val(t.url),jQuery("#contributor-picture-thumbnail").attr("src",t.url).show()})),r.on("select",(function(){var t=r.state().get("selection").first().toJSON();512!==t.width||512!==t.height?r.setState("cropper"):(jQuery("#contributor-picture").val(t.url),jQuery("#contributor-picture-thumbnail").attr("src",t.url).show(),r.close())}))}))}))}));